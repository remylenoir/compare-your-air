(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(45)},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),o=n.n(c),i=n(2),l=Object(a.createContext)(),s=Object(a.createContext)(),u=Object(a.createContext)(),m=function(e){var t=e.children,n=Object(a.useState)({input:"",results:[]}),c=Object(i.a)(n,2),o=c[0],m=c[1],p=Object(a.useState)({locations:[]}),d=Object(i.a)(p,2),f=d[0],v=d[1],h=Object(a.useState)({locations:[]}),b=Object(i.a)(h,2),E=b[0],j=b[1];return r.a.createElement(s.Provider,{value:[o,m]},r.a.createElement(u.Provider,{value:[f,v]},r.a.createElement(l.Provider,{value:[E,j]},t)))},p=n(3),d=n.n(p),f=n(15),v=n(16),h=n.n(v),b=function(){var e=Object(f.a)(d.a.mark(function e(t,n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("https://api.openaq.org/v1/latest?country=".concat(t,"&limit=").concat(n));case 3:return a=e.sent,e.abrupt("return",a.data.results);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.error(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}(),E=n(18),j=n(4),O=function(){var e=Object(a.useContext)(l),t=Object(i.a)(e,1)[0],n=Object(a.useContext)(s),c=Object(i.a)(n,2),o=c[0],m=c[1],p=Object(a.useContext)(u),d=Object(i.a)(p,2),f=d[0],v=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search position-relative"},r.a.createElement("input",{type:"search",placeholder:"Enter city name...",className:"search__input position-relative",value:o.input,onChange:function(e){var n=[],a=e.target.value,r=t.locations.map(function(e){return e.location});a.length>0&&(n=r.filter(function(e){return e.toLowerCase().slice(0,a.length).includes(a.toLowerCase())})),m({results:n,input:a})}}),function(){var e=o.results;if(e.length>0)return r.a.createElement("div",{className:"search__results position-absolute"},e.map(function(e,n){return r.a.createElement("div",{key:n,className:"search__result",onClick:function(){return function(e){var n=t.locations.find(function(t){return t.location===e});if(n===f.locations.find(function(t){return t.location===e}))return m(Object(j.a)({},o,{input:"Already selected!"})),setTimeout(function(){m(Object(j.a)({},o,{input:""}))},1500),null;v({locations:[].concat(Object(E.a)(f.locations),[n])}),m({input:"",results:[]})}(e)}},e)}))}()))},w=n(17),x=n.n(w),N=function(){var e=Object(a.useContext)(u),t=Object(i.a)(e,2),n=t[0],c=t[1],o=n.locations;return r.a.createElement("div",{className:"cards d-flex"},o.length>0&&o.map(function(e,t){return r.a.createElement("div",{key:t,className:"card position-relative"},r.a.createElement("div",{className:"card__close position-absolute",onClick:function(){return function(e){var t=o.find(function(t){return t.location===e}),n=o.filter(function(e){return e!==t});c({locations:n})}(e.location)}},"X"),r.a.createElement("p",{className:"card__time text-uppercase"},"Updated ",x()(e&&e.measurements[0].lastUpdated).fromNow()),r.a.createElement("p",{className:"card__location"},e&&e.location),r.a.createElement("p",{className:"card__city"},"in ",e&&e.city,", United Kingdom"),r.a.createElement("p",{className:"card__measurements"},"Values:"," ",e&&e.measurements.map(function(e,t){return r.a.createElement("span",{className:"parameter",key:t},e.parameter,": ",e.value,r.a.createElement("span",{className:"parameter__separator"},",")," ")})))}))},_=function(){var e=Object(a.useContext)(l),t=Object(i.a)(e,2)[1];return Object(a.useEffect)(function(){b("GB",500).then(function(e){return t({locations:e})}).catch(function(e){return console.error(e)})},[t]),r.a.createElement("div",{className:"main-container d-flex p-20"},r.a.createElement("div",null,r.a.createElement("h1",{className:"text-white text-center"},"Compare your Air"),r.a.createElement("p",{className:"text-white text-center"},"Compare the air quality between cities in the UK."),r.a.createElement("p",{className:"text-white text-center mt-0"},"Select cities to compare using the search tool below.")),r.a.createElement(O,null),r.a.createElement(N,null))};n(44),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(function(){return r.a.createElement(m,null,r.a.createElement(_,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.8815f698.chunk.js.map